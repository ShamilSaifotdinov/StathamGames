### Как запускать?

1. Убедитесь что у вас установлен `node` и `docker`
2. Выполните команду `yarn bootstrap` - это обязательный шаг, без него ничего работать не будет :)
3. Выполните команду `yarn dev`
4. Выполните команду `yarn dev --scope=client` чтобы запустить только клиент
5. Выполните команду `yarn dev --scope=server` чтобы запустить только server

### Как добавить зависимости?

В этом проекте используется `monorepo` на основе [`lerna`](https://github.com/lerna/lerna)

Чтобы добавить зависимость для клиента
`yarn lerna add {your_dep} --scope client`

Для сервера
`yarn lerna add {your_dep} --scope server`

И для клиента и для сервера
`yarn lerna add {your_dep}`

Если вы хотите добавить dev зависимость, проделайте то же самое, но с флагом `dev`
`yarn lerna add {your_dep} --dev --scope client`

### Тесты

Для клиента используется [`react-testing-library`](https://testing-library.com/docs/react-testing-library/intro/)

`yarn test`

### Линтинг

`yarn lint`

### Форматирование prettier

`yarn format`

### Production build

`yarn build`

И чтобы посмотреть что получилось

`yarn preview --scope client`
`yarn preview --scope server`

## Хуки

В проекте используется [lefthook](https://github.com/evilmartians/lefthook)
Если очень-очень нужно пропустить проверки, используйте `--no-verify` (но не злоупотребляйте :)

## Ой, ничего не работает :(

Откройте issue, я приду :)

## Автодеплой статики на vercel

Зарегистрируйте аккаунт на [vercel](https://vercel.com/)
Следуйте [инструкции](https://vitejs.dev/guide/static-deploy.html#vercel-for-git)
В качестве `root directory` укажите `packages/client`

Все ваши PR будут автоматически деплоиться на vercel. URL вам предоставит деплоящий бот

## Production окружение в докере

Перед первым запуском выполните `node init.js`

`docker compose up` - запустит три сервиса

1. nginx, раздающий клиентскую статику (client)
2. node, ваш сервер (server)
3. postgres, вашу базу данных (postgres)

Если вам понадобится только один сервис, просто уточните какой в команде
`docker compose up {sevice_name}`, например `docker compose up server`

## Описание игры

Игра начинается со стартового экрана, на котором расположен базовый лендинг. Поле для авторизации / регистрации, лидерборд.
Нажав кнопку «играть», игрок попадает на игровое бесконечное поле, по которому нужно двигаться при помощи четырех кнопок на клавиатуре: W, A, S, D. 
Зажимая кнопку W, игрок двигается по полю вперед, вместе с этим происходят автоматические выстрелы в ту сторону, в которую происходит движение игрока. 
Зажав кнопку S, игрок продвигается по полю назад и в данном направлении осуществляются выстрелы. 
При зажатии кнопки A, игрок продвигается влево, а при зажатии кнопки D – вправо, в таком же направлении осуществляются выстрелы. 

Зажимая две клавиши W + A, игрок двигается по диагонали в вверх слева. Зажимая клавиши A + S, игрок двигается по диагонали вниз слева. Зажимая клавиши S + D, игрок двигается по диагонали вниз справа. Зажимая клавиши D + W, игрок двигается по диагонали вверх справа. 

На 0 минуте к игроку начинают спавниться Мини Жуки с 2 хп. За убийство данного жука выпадает кристалл, и если игрок подбирает данный кристалл, то его ему прибавляется одно очко к следующему уровню. После сбора необходимого кол-ва кристалов уровень повышается и появляется модальное окно с возможностью выбора улучшений, представленных выше. 
Игра продолжается, на второй минуте появляются Жуки с 4 хп. В это время игрок продолжает движение по полю. За убийство врагов также выпадают кристаллы для повышения уровня.
На 4-ой минуте игры появляются враги- Жучары с 10 хп. Если к данному времени уровень игрока заметно повышен, то убийство врага при помощи улучшений становится проще, в другом случае игра усложняется, и игрок имеет шанс завершить игру в случае потери последнего очка здоровья. 
Мегажуки появляются на 6 минуте игры с 25 хп. Имея необходимые улучшения, игрок с легкостью может одолеть врагов, маневрируя между ними. 

Улучшения: 
При покупке улучшения на количество сердец, соответственно, возрастает их количество на 1. 
При покупке улучшения «урон пуль», увеличивается урон от пуль на 30% от текущего урона.
При покупке улучшения «скорость перезарядки», сокращается скорость перезарядки оружия на уменьшается на 10% от текущей скорости.
При покупке улучшения «скорость передвижения», увеличивается скорость передвижения игрока на 10% от текущего уровня.
При покупке улучшения «дальность магнита кристаллов», увеличивается дальность магнита, соответственно игрок может при помощи магнита собрать нужные кристаллы на более дальнем расстоянии. 
При покупке улучшение "Thanos snap" умирает половина всех врагов
При покупке улучшения "Огнемет" на 10 секунд игрок получает высокую скорось перезарядки и большой урон от пуль

Игровой экран:
В верху экрана отображена шкала, на которой показано на каком этапе находится игрок перед повышением своего уровня. Шкала заполняется цветом при условии, что игрок собирает с поля кристаллы. 
Чуть ниже (в середине экрана) идет отчет прошедшего времени. 
Ниже шкалы в левом верхнем углу отображены иконки полученных игроком улучшений (или их нет вовсе). 
Ниже шкалы в правом верхнем углу показано количество убитых врагов с соответствующей иконкой. Также в правом верхнем углу находится количество сердец, оставшихся у игрока на момент прохождения игры. 
В правом нижнем углу экрана есть кнопка «выйти», нажав на которую игрок может покинуть игру и выйти к стартовому экрану, после чего начав игру заново. 
При смерти игрока всплывает окно «игра окончена», внизу появляется кнопка «выйти» а так же лидерборд. Нажав на «выйти», игрок возвращается к стартовому экрану. После нажатия чего на экране всплывает окно «результаты», в котором отражены такие критерии:
Прожито времени (показано время, при котором игрок покинул игру);
Достигнут уровень (показано какого уровня смог достичь игрок перед тем как покинуть игру);
